(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resource"],{2240:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"resource"},[t("resource-list")],1)},a=[],n=t("2b0e"),s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"resource-list"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("el-form",{ref:"form",attrs:{inline:!0,model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{prop:"name",label:"资源名称"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{prop:"url",label:"资源路径"}},[t("el-input",{model:{value:e.form.url,callback:function(r){e.$set(e.form,"url",r)},expression:"form.url"}})],1),t("el-form-item",{attrs:{prop:"categoryId",label:"资源分类"}},[t("el-select",{attrs:{placeholder:"请选择资源分类",clearable:""},model:{value:e.form.categoryId,callback:function(r){e.$set(e.form,"categoryId",r)},expression:"form.categoryId"}},e._l(e.resourceCategories,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:e.isLoading},on:{click:e.onSubmit}},[e._v("查询搜索")]),t("el-button",{attrs:{disabled:e.isLoading},on:{click:e.onReset}},[e._v("重置")])],1)],1)],1),t("el-button",{on:{click:e.handleAdd}},[e._v("添加资源")]),t("el-button",{on:{click:function(r){return e.$router.push({name:"resourceCategory"})}}},[e._v("资源分类")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.resources}},[t("el-table-column",{attrs:{type:"index",label:"编号",width:"100"}}),t("el-table-column",{attrs:{prop:"name",label:"资源名称"}}),t("el-table-column",{attrs:{prop:"url",label:"资源路径"}}),t("el-table-column",{attrs:{prop:"description",width:"180",label:"描述"}}),t("el-table-column",{attrs:{prop:"createdTime",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(e._f("dateFormat")(r.row.createdTime))+" ")]}}])}),t("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(r.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.row)}}},[e._v("删除")])]}}])})],1),t("el-pagination",{attrs:{disabled:e.isLoading,"current-page":e.form.current,"page-sizes":[5,10,20],"page-size":e.form.size,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(r){return e.$set(e.form,"current",r)},"update:current-page":function(r){return e.$set(e.form,"current",r)}}})],1),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(r){e.dialogVisible=r}}},[t("el-form",{ref:"resourceform",attrs:{model:e.resourceform,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{label:"资源名称",prop:"name"}},[t("el-input",{model:{value:e.resourceform.name,callback:function(r){e.$set(e.resourceform,"name",r)},expression:"resourceform.name"}})],1),t("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[t("el-input",{model:{value:e.resourceform.url,callback:function(r){e.$set(e.resourceform,"url",r)},expression:"resourceform.url"}})],1),t("el-form-item",{attrs:{label:"资源分类",prop:"categoryId"}},[t("el-select",{attrs:{placeholder:"请选择资源分类"},model:{value:e.resourceform.categoryId,callback:function(r){e.$set(e.resourceform,"categoryId",r)},expression:"resourceform.categoryId"}},e._l(e.resourceCategories,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.resourceform.description,callback:function(r){e.$set(e.resourceform,"description",r)},expression:"resourceform.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(r){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveCreateOrUpdateResource}},[e._v("确 定")])],1)],1)],1)},i=[],l=(t("96cf"),t("1da1")),c=t("675f"),u=t("9d1c"),d=n["default"].extend({name:"ResourceList",data:function(){return{resources:[],form:{name:"",url:"",current:1,size:5,categoryId:null},resourceform:{},totalCount:0,resourceCategories:[],isLoading:!0,dialogVisible:!1,dialogTitle:"添加资源",rules:{name:[{required:!0,message:"请输入名称",trigger:"change"}],url:[{required:!0,message:"请输入url",trigger:"change"}],categoryId:[{required:!0,message:"请选择资源分类",trigger:"change"}],description:[{required:!0,message:"请输入描述",trigger:"change"}]}}},created:function(){this.loadResources(),this.loadResourceCategories()},methods:{loadResourceCategories:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["a"])();case 2:t=r.sent,o=t.data,e.resourceCategories=o.data;case 5:case"end":return r.stop()}}),r)})))()},loadResources:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.isLoading=!0,r.next=3,Object(c["c"])(e.form);case 3:t=r.sent,o=t.data,e.resources=o.data.records,e.totalCount=o.data.total,e.isLoading=!1;case 8:case"end":return r.stop()}}),r)})))()},onSubmit:function(){this.form.current=1,this.loadResources()},handleEdit:function(e){console.log("handleEdit",e),this.dialogTitle="编辑",this.resourceform=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete:function(e){console.log("handleDelete",e)},handleAdd:function(e){console.log(e),this.dialogTitle="添加资源",this.dialogVisible=!0},handleSizeChange:function(e){this.form.size=e,this.form.current=1,this.loadResources()},handleCurrentChange:function(e){this.form.current=e,this.loadResources()},onReset:function(){this.$refs.form.resetFields(),this.form.current=1,this.loadResources()},saveCreateOrUpdateResource:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$refs.resourceform.validate(function(){var r=Object(l["a"])(regeneratorRuntime.mark((function r(t){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=9;break}return r.next=3,Object(c["e"])(e.resourceform);case 3:o=r.sent,a=o.data,"000000"===a.code&&e.$message({type:"success",message:"操作成功!"}),e.resourceform={},e.dialogVisible=!1,e.loadResources();case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}}}),m=d,f=t("2877"),p=Object(f["a"])(m,s,i,!1,null,"56c67716",null),g=p.exports,b=n["default"].extend({name:"ResourceIndex",components:{ResourceList:g}}),h=b,v=Object(f["a"])(h,o,a,!1,null,"73524578",null);r["default"]=v.exports},"675f":function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"b",(function(){return n})),t.d(r,"a",(function(){return s})),t.d(r,"d",(function(){return i})),t.d(r,"e",(function(){return l}));var o=t("b32d"),a=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/getResourcePages",data:e})},n=function(){return Object(o["a"])({method:"GET",url:"/boss/resource/getAll"})},s=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})},i=function(e){return Object(o["a"])({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})},l=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/saveOrUpdate",data:e})}},"9d1c":function(e,r,t){"use strict";t.d(r,"a",(function(){return a})),t.d(r,"b",(function(){return n}));var o=t("b32d"),a=function(){return Object(o["a"])({method:"GET",url:"/boss/resource/category/getAll"})},n=function(e){return Object(o["a"])({method:"POST",url:"/boss/resource/category/saveOrderUpdate",data:e})}}}]);
//# sourceMappingURL=resource.e22356ef.js.map